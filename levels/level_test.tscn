[gd_scene load_steps=16 format=3 uid="uid://dkqwtr4rnmqrm"]

[ext_resource type="Script" uid="uid://dpdpi6h67t2sv" path="res://scripts/NetworkGame.cs" id="1_iho50"]
[ext_resource type="Script" uid="uid://dqtmoh6iok0w8" path="res://scripts/TileViewManager.cs" id="2_3wh16"]
[ext_resource type="Script" uid="uid://b0daseqy64np3" path="res://scripts/WorldData.cs" id="3_4w0vo"]
[ext_resource type="PackedScene" uid="uid://cq158x5fr8rl2" path="res://scenes/Tile.tscn" id="3_tt56a"]
[ext_resource type="Script" uid="uid://dkywjpsihtg3k" path="res://scripts/TileDatabase.cs" id="4_eu8vo"]
[ext_resource type="Script" uid="uid://1dk8arnxdpe7" path="res://scripts/TileData.cs" id="5_y0s4v"]
[ext_resource type="Script" uid="uid://ig24mq0abbjv" path="res://scripts/tiles/WizardTile.cs" id="6_tt56a"]
[ext_resource type="Texture2D" uid="uid://2wo50wo11hag" path="res://art/square.tres" id="7_cd850"]
[ext_resource type="Script" uid="uid://b8ye8jupapsj" path="res://scripts/LocalPlayerController.cs" id="8_sop0g"]
[ext_resource type="Script" uid="uid://4r6e7640ib4d" path="res://scripts/tiles/WallTile.cs" id="8_vac4a"]
[ext_resource type="Texture2D" uid="uid://dnmdxwd773ow6" path="res://art/rect.tres" id="9_gcim3"]

[sub_resource type="SpriteFrames" id="SpriteFrames_vac4a"]
animations = [{
"frames": [],
"loop": true,
"name": &"WALL_NORMAL",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("7_cd850")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="Resource" id="Resource_sop0g"]
script = ExtResource("6_tt56a")
Id = "WizardTile"
SpriteFrames = SubResource("SpriteFrames_vac4a")
metadata/_custom_type_script = "uid://ig24mq0abbjv"

[sub_resource type="SpriteFrames" id="SpriteFrames_cd850"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("9_gcim3")
}],
"loop": true,
"name": &"WALL_NORMAL",
"speed": 5.0
}]

[sub_resource type="Resource" id="Resource_cd850"]
script = ExtResource("8_vac4a")
Id = "WallTile"
SpriteFrames = SubResource("SpriteFrames_cd850")
metadata/_custom_type_script = "uid://4r6e7640ib4d"

[node name="LevelTest" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]

[node name="Network" type="Node" parent="." node_paths=PackedStringArray("ViewManager")]
script = ExtResource("1_iho50")
ViewManager = NodePath("../ViewManager")

[node name="ViewManager" type="Node" parent="."]
script = ExtResource("2_3wh16")
TileViewScene = ExtResource("3_tt56a")

[node name="WorldData" type="Node" parent="."]
script = ExtResource("3_4w0vo")
gridScale = 40.0

[node name="TileDatabase" type="Node" parent="."]
script = ExtResource("4_eu8vo")
tileDataList = Array[ExtResource("5_y0s4v")]([SubResource("Resource_sop0g"), SubResource("Resource_cd850")])

[node name="PlayerController" type="Node" parent="." node_paths=PackedStringArray("Game") groups=["PlayerController"]]
script = ExtResource("8_sop0g")
Game = NodePath("../Network")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="Button" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_right = 8.0
offset_bottom = 8.0
text = "Host"

[node name="Button2" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -1.0
offset_top = 31.0
offset_right = 43.0
offset_bottom = 62.0
text = "Join"

[node name="Button3" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -2.0
offset_top = 60.0
offset_right = 51.0
offset_bottom = 91.0
text = "Leave"

[node name="Button4" type="Button" parent="CanvasLayer/Control"]
layout_mode = 0
offset_left = -2.0
offset_top = 89.0
offset_right = 51.0
offset_bottom = 120.0
text = "Start"

[connection signal="pressed" from="CanvasLayer/Control/Button" to="Network" method="Host" binds= [7777, 4]]
[connection signal="pressed" from="CanvasLayer/Control/Button2" to="Network" method="Join" binds= ["localhost", 7777]]
[connection signal="pressed" from="CanvasLayer/Control/Button3" to="Network" method="Leave"]
[connection signal="pressed" from="CanvasLayer/Control/Button4" to="Network" method="StartGame"]
